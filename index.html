<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Commander - Vice AdmirÃ¡l JiÅ™Ã­k</title>
     <link rel="stylesheet" href="style.css">
     <link rel="stylesheet" href="multi-medialni-velikosti-obrazovek.css">
     <link rel="stylesheet" href="vlastni-modularni-okno.css">
</head>
<body>
    <header>
        <div>USS PROMETHEUS /// AI COMMAND TERMINAL</div>
        <div style="font-size: 0.8em; opacity: 0.8;">V.8.0 - FIREBASE AUTH</div>
        <div style="display: flex; gap: 10px; align-items: center;">
            <!-- LOGIN BUTTON (ZobrazÃ­ se kdyÅ¾ NENÃ pÅ™ihlÃ¡Å¡en) -->
            <button id="login-btn" onclick="loginWithGoogle()" style="font-size: 0.7em; padding: 5px 15px; height: auto;">
                ğŸ” PÅ˜IHLÃSIT SE
            </button>
            
            <!-- USER INFO (ZobrazÃ­ se kdyÅ¾ JE pÅ™ihlÃ¡Å¡en) -->
            <div id="user-info" style="display: none; align-items: center; gap: 8px;">
                <img id="user-avatar" src="" alt="Avatar" style="width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--lcars-orange);">
                <span id="user-name" style="color: white; font-size: 0.8em;"></span>
                <button id="logout-btn" onclick="logout()" style="font-size: 0.65em; padding: 3px 10px; background: var(--lcars-red);">
                    ğŸšª ODHLÃSIT
                </button>
            </div>
            
            <button onclick="toggleCanvas()" style="font-size: 0.7em; padding: 5px; height: auto;">ğŸ“ CANVAS</button>
            <button onclick="openApiKeyModal()" style="font-size: 0.7em; padding: 5px; height: auto; background: var(--lcars-purple);">ğŸ” SPRÃVA KLÃÄŒÅ®</button>
        </div>
    </header>

    <div id="model-status"></div>

    <div id="api-key-container">
        <label style="color:white; display:block; margin-bottom:5px;">VloÅ¾te Google AI Studio API Key:</label>
        <input type="password" id="api-key-input" style="width: 100%; padding: 5px;">
        <button onclick="saveApiKey()" style="margin-top: 5px; width: 100%;">ULOÅ½IT</button>
    </div>

    <div id="chat-window">
        <div class="message system">
            ğŸ–– VÃTEJTE, VICE ADMIRÃLE JIÅ˜ÃKU.<br>
            Tento terminÃ¡l je pod vaÅ¡Ã­ pÅ™Ã­mou kontrolou.<br>
            VojenskÃ½ Å™Ã¡d je aktivnÃ­ a mÃ¡ absolutnÃ­ prioritu.
        </div>
    </div>

    <div class="typing-indicator" id="typing-indicator">Gemini analyzuje data...</div>

    <!-- CANVAS EDITOR -->
    <div id="canvas-container">
        <div id="canvas-header">
            <div>âš¡ CANVAS EDITOR</div>
            <div style="display: flex; gap: 10px;">
                <button id="edit-toggle" onclick="toggleEditMode()" style="padding: 3px 10px; font-size: 0.8em;">âœï¸ UPRAVIT</button>
                <button onclick="sendCanvasToGemini()" style="padding: 3px 10px; font-size: 0.8em;">ğŸ¤– POÅ LI GEMINI</button>
                <button onclick="clearCanvas()" style="padding: 3px 10px; font-size: 0.8em;">ğŸ—‘ï¸ VYÄŒISTIT</button>
                <button onclick="copyCanvas()" style="padding: 3px 10px; font-size: 0.8em;">ğŸ“‹ KOPÃROVAT</button>
                <button onclick="toggleCanvas()" style="padding: 3px 10px; font-size: 0.8em;">âœ•</button>
            </div>
        </div>
        <div id="canvas-tabs">
            <button class="canvas-tab active" onclick="switchCanvasTab('code')">KÃ“D</button>
            <button class="canvas-tab" onclick="switchCanvasTab('preview')">PREVIEW</button>
        </div>
        <div id="canvas-editor" contenteditable="false"></div>
        <iframe id="canvas-preview"></iframe>
    </div>

    <footer>
        <input type="file" id="file-input" accept="image/*,application/pdf,video/*,audio/*,.html,.css,.js,.json,.txt,.md,.xml,.csv,.php,.py,.java,.cpp,.c,.h,.hpp,.ts,.tsx,.jsx,.yaml,.yml,.sql,.sh,.bat" multiple style="display:none;" onchange="handleFileSelect(event)">
        <button onclick="document.getElementById('file-input').click()" style="padding: 0 15px;">ğŸ“ SOUBOR</button>
        <textarea id="user-input" placeholder="Zadejte rozkaz, admirÃ¡le..." onkeydown="if(event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); }"></textarea>
        <button onclick="sendMessage()">ODESLAT ğŸš€</button>
    </footer>
    
    <div id="file-preview" style="padding: 10px 20px; background: #1a1a1a; border-top: 1px solid #333; display: none; flex-wrap: wrap; gap: 10px;"></div>

<!--===================================- 
        FIREBASE MODULY (TYPE MODULE!)
<---===================================-->
<script type="module" src="gemini-aplikace-firebase.js"></script>
<script type="module" src="gemini-aplikace-google-login.js"></script>
<script type="module" src="vlastni-modularni-okno.js"></script>

<!--===================================- 
        HLAVNÃ SYSTEM-PROMPT (VOJENSKÃ Å˜ÃD)
<---===================================-->    
<script src="system-prompt.js"></script>   

<!--===================================- 
        HLAVNÃ LOGIKA PRO AI APLIKACI
<---===================================-->
<script src="script.js"></script>   
</body>
</html>